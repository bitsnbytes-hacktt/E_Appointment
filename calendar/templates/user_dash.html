{% extends "layout.html" %}

{% block content %}

 <!---javascript files -->
 <link href="{{ url_for( 'static' , filename='css/user_dash.css') }}" rel='stylesheet' />

<div class="rowb">

    <!--place calendar on this side-->
    <div class="column right">
        <div class="calendar">
                

                <!---javascript files -->
                     <link href="{{ url_for( 'static' , filename='css/fullcalendar.css') }}" rel='stylesheet' />
                     
                     <link href="{{ url_for( 'static' , filename='css/fullcalendar.print.css') }}" rel='stylesheet' media='print' />
                     <script src="{{ url_for( 'static' , filename='js/jquery-1.10.2.js') }}" type="text/javascript"></script>
                     <script src="{{ url_for( 'static' , filename='js/jquery-ui.custom.min.js') }}" type="text/javascript"></script>
                     <script src="{{ url_for( 'static' , filename='js/fullcalendar.js') }}" type="text/javascript"></script>
                      
                <script>
                     $(document).ready(function() {
                        var date = new Date();
                        var d = date.getDate(); 
                        var m = date.getMonth();
                        var y = date.getFullYear(); 
                
                        /* initialize the calendar
                        -----------------------------------------------------------------*/
                
                        var calendar =  $('#calendar').fullCalendar({
                            header: {
                                left: 'title',
                                center: 'agendaDay,agendaWeek,month',
                                right: 'prev,next today'
                            },
                            editable: false,
                            firstDay: 0, //  1(Monday) this can be changed to 0(Sunday) for the USA system
                            selectable: true,
                            defaultView: 'month',
                
                            axisFormat: 'h:mm',
                            columnFormat: {
                                month: 'ddd',    // Mon
                                week: 'ddd d', // Mon 7
                                day: 'dddd M/d',  // Monday 9/7
                                agendaDay: 'dddd d'
                            },
                            titleFormat: {
                                month: 'MMMM yyyy', // September 2009
                                week: "MMMM yyyy", // September 2009
                                day: 'MMMM yyyy'                  // Tuesday, Sep 8, 2009
                            },
                            allDaySlot: false,
                
                            events: [
                                {% for post in posts %}
                                    {
                                        title: '{{post.appt}}',
                                        start: new Date( {{post.year}} , {{post.month}} , {{post.day}} , {{post.hour}} , {{post.min}} ),
                                        end: new Date( {{post.year}} , {{post.month}} , {{post.day}} , {{post.hour}} , {{post.min}}+{{post.period}}  ),
                                        allDay: false,
                                    },
                                {% endfor %}
                            ],
                        });
                
                    });
                
                </script>
                
                <style>
                body {
                    /*margin-top: 40px; */
                    text-align: center;
                    font-size: 14px;
                    font-family: "Helvetica Nueue",Arial,Verdana,sans-serif;
                    background-color: rgb(225, 221, 221);
                    }
                
                #wrap {
                    width: auto;
                    margin: 0 0 0 0;
                    }
                
                #external-events {
                    /*float: left;*/
                    width: 150px;
                    padding: 0 10px;
                    text-align: left;
                    }
                
                #external-events h4 {
                    font-size: 16px;
                    margin-top: 0;
                    padding-top: 1em;
                    }
                
                .external-event { /* try to mimick the look of a real event */
                    margin: 10px 0;
                    padding: 2px 4px;
                    background: #3366CC;
                    color: #fff;
                    font-size: .85em;
                    cursor: pointer;
                    }
                
                #external-events p {
                    margin: 1.5em 0;
                    font-size: 11px;
                    color: #666;
                    }
                
                #external-events p input {
                    margin: 0;
                    vertical-align: middle;
                    }
                
                #calendar {
                    float: center; 
                    position:relative;
                    /*z-index: ;*/
                    margin: 0 0 0 0;
                    border:solid black 1px;
                    width: 720px;
                    background-color: #FFFFFF;
                    border-radius: 6px;
                    box-shadow: 0 1px 2px #C3C3C3;
                    }
                
                </style>
                
                <div id='wrap'>
                    <div id='calendar'></div>
                    <div style='clear:both'></div>
                </div>
                        
        </div>
    </div> <!--enddiv for the right column-->

    <!--place list of appts and make new appt on this side-->
    <div class="column left">

        <div class="container-fluid">    
            <ul>
                <h2 style="text-align: center" style="word-wrap: normal">List of your appointments</h2> 
                {% for post in posts %}
                <li>
                    <p>{{post.appt}}</p>
                    <p>{{post.day}}/{{post.month}}/{{post.year}} @ {{post.hour}}:{{post.min}}</p>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div> <!--enddiv for left column-->

    

</div> <!--enddiv for the overall rowb-->

{% endblock content %}

